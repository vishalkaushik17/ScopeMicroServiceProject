/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./Security/utils.ts":
/*!***************************!*\
  !*** ./Security/utils.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GenericFunctionality: () => (/* binding */ GenericFunctionality),
/* harmony export */   InsertNodeDynamicly: () => (/* binding */ InsertNodeDynamicly),
/* harmony export */   cipher: () => (/* binding */ cipher),
/* harmony export */   decipher: () => (/* binding */ decipher)
/* harmony export */ });
const cipher = salt => {
    const textToChars = text => text.split('').map(c => c.charCodeAt(0));
    const byteHex = n => ("0" + Number(n).toString(16)).substr(-2);
    const applySaltToChar = code => textToChars(salt).reduce((a, b) => a ^ b, code);
    return text => text.split('')
        .map(textToChars)
        .map(applySaltToChar)
        .map(byteHex)
        .join('');
};
const decipher = salt => {
    const textToChars = text => text.split('').map(c => c.charCodeAt(0));
    const applySaltToChar = code => textToChars(salt).reduce((a, b) => a ^ b, code);
    return encoded => encoded.match(/.{1,2}/g)
        .map(hex => parseInt(hex, 16))
        .map(applySaltToChar)
        .map(charCode => String.fromCharCode(charCode))
        .join('');
};
class GenericFunctionality {
    static getFormattedDate(date) {
        const day = date.getDate();
        const month = date.getMonth() + 1;
        const year = date.getFullYear().toString().slice(2);
        return day + '-' + month + '-' + year;
    }
    static CopyToClipboard(ele) {
        let r = document.createRange();
        r.selectNode(ele);
        window.getSelection().removeAllRanges();
        window.getSelection().addRange(r);
        document.execCommand('copy');
        window.getSelection().removeAllRanges();
    }
    static resizeImage(file) {
        const reader = new FileReader();
        reader.onload = function (event) {
            const img = new Image();
            img.onload = function () {
                const canvas = document.getElementById('canvas');
                const ctx = canvas.getContext('2d');
                const maxWidth = 1024;
                const maxHeight = 1024;
                let width = img.width;
                let height = img.height;
                if (width > maxWidth || height > maxHeight) {
                    if (width > height) {
                        height = Math.round((maxWidth / width) * height);
                        width = maxWidth;
                    }
                    else {
                        width = Math.round((maxHeight / height) * width);
                        height = maxHeight;
                    }
                }
                canvas.width = width;
                canvas.height = height;
                ctx.drawImage(img, 0, 0, width, height);
                canvas.toBlob(function (blob) {
                    const resizedFile = new File([blob], file.name, {
                        type: file.type,
                        lastModified: Date.now()
                    });
                    console.log('Resized file:', resizedFile);
                }, file.type);
            };
            img.src = event.target.result;
        };
        reader.readAsDataURL(file);
    }
    static appendFormData(formData, data, parentKey) {
        if (data && typeof data === 'object' && !(data instanceof File)) {
            Object.keys(data).forEach(key => {
                GenericFunctionality.appendFormData(formData, data[key], parentKey ? `${parentKey}[${key}]` : key);
            });
        }
        else {
            parentKey = parentKey;
            formData.append(parentKey, data);
        }
    }
    static removeNotRequiredProperties(objectToSubmitForm, element, key, value) {
        if (element && element.hasAttribute('dontcount') == true) {
            objectToSubmitForm[key] = null;
        }
        else {
            if (typeof value === 'string') {
                objectToSubmitForm[key] = value;
            }
            else if (typeof value === 'boolean') {
                objectToSubmitForm[key] = value;
            }
            else if (typeof value === 'number') {
                objectToSubmitForm[key] = value;
            }
            else {
                if (value !== null) {
                    objectToSubmitForm[key] = value;
                }
                else {
                    objectToSubmitForm[key] = null;
                }
            }
        }
    }
    static CreateNestedObject(obj, path, value) {
        const keys = path.split('.');
        let current = obj;
        for (let i = 0; i < keys.length - 1; i++) {
            if (!current[keys[i]]) {
                current[keys[i]] = {};
            }
            current = current[keys[i]];
        }
        const finalKey = keys[keys.length - 1];
        if (typeof value === 'string') {
            current[finalKey] = value;
        }
        else if (typeof value === 'boolean') {
            current[finalKey] = value;
        }
        else if (typeof value === 'number') {
            current[finalKey] = value;
        }
        else {
            current[finalKey] = value;
        }
    }
    static SetSelectedValue(selectObj, valueToSet) {
        for (var i = 0; i < selectObj.options.length; i++) {
            if (selectObj.options[i].value == valueToSet) {
                selectObj.options[i].selected = true;
                selectObj.selectedIndex = i;
                GenericFunctionality.HtmlLogs(`SetSelectedValue`, `Option value selected!`, selectObj.options[i].text);
                return;
            }
        }
    }
    static SetSelectedValueByText(selectObj, valueToSet) {
        for (var i = 0; i < selectObj.options.length; i++) {
            if (selectObj.options[i].text == valueToSet) {
                selectObj.options[i].selected = true;
                selectObj.selectedIndex = i;
                GenericFunctionality.HtmlLogs(`SetSelectedValueByText`, `Option value selected!`, selectObj.options[i].text);
                return;
            }
        }
    }
    static getFormElementKeyValuePairs(form) {
        GenericFunctionality.HtmlLogs(`getFormElementKeyValuePairs -`, `Getting key value pair of form element`, '');
        let formKeyValuePairElement = [];
        [...form].forEach((singleElement) => {
            formKeyValuePairElement.push({ key: singleElement[0].toUpperCase(), actualKey: singleElement[0], value: singleElement[1], htmlElement: singleElement, });
        });
        GenericFunctionality.HtmlLogs(`getFormElementKeyValuePairs -`, `Key Value pair`, formKeyValuePairElement);
        return formKeyValuePairElement;
    }
    static prettyJ(json) {
        if (typeof json !== 'string') {
            json = JSON.stringify(json, undefined, 2);
        }
        return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) {
            let cls = "\x1b[36m";
            if (/^"/.test(match)) {
                if (/:$/.test(match)) {
                    cls = "\x1b[34m";
                }
                else {
                    cls = "\x1b[32m";
                }
            }
            else if (/true|false/.test(match)) {
                cls = "\x1b[35m";
            }
            else if (/null/.test(match)) {
                cls = "\x1b[31m";
            }
            return cls + match + "\x1b[0m";
        });
    }
    static syntaxHighlight(json) {
        if (typeof json != 'string') {
            json = JSON.stringify(json, undefined, 2);
        }
        json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
        return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) {
            var cls = 'number';
            if (/^"/.test(match)) {
                if (/:$/.test(match)) {
                    cls = 'key';
                }
                else {
                    cls = 'string';
                }
            }
            else if (/true|false/.test(match)) {
                cls = 'boolean';
            }
            else if (/null/.test(match)) {
                cls = 'null';
            }
            return '<span class="' + cls + '">' + match + '</span>';
        });
    }
    static HtmlApiLogs(message, apiLogs) {
        if (GenericFunctionality.Environment && GenericFunctionality.Environment == "Production") {
            return;
        }
        let logsModal = document.querySelector(`#logs`);
        logsModal.innerHTML += `<b style='color:#574fa9;'>TS Operation:</b> (${new Date().toLocaleString()}): ${message}: <pre class='displaylogs'>${apiLogs}</pre> <br>`;
    }
    static addItemToCookie(key, value, expirationDays) {
        const date = new Date();
        date.setTime(date.getTime() + (expirationDays * 24 * 60 * 60 * 1000));
        const expires = "; expires=" + date.toUTCString();
        document.cookie = key + "=" + value + expires + "; path=/";
    }
    static getCookie(key) {
        const name = key + "=";
        const decodedCookie = decodeURIComponent(document.cookie);
        const cookieArray = decodedCookie.split(';');
        for (let i = 0; i < cookieArray.length; i++) {
            let cookie = cookieArray[i];
            while (cookie.charAt(0) === ' ') {
                cookie = cookie.substring(1);
            }
            if (cookie.indexOf(name) === 0) {
                return cookie.substring(name.length, cookie.length);
            }
        }
        return undefined;
    }
    static HtmlLogs(message, key, dataToDisplay) {
        if (GenericFunctionality.Environment && GenericFunctionality.Environment == "Production") {
            return;
        }
        let logsModal = document.querySelector(`#logs`);
        if (!key)
            key = '';
        let parsedObj;
        try {
            parsedObj = JSON.parse(dataToDisplay);
            dataToDisplay = JSON.stringify(parsedObj, null, 4);
        }
        catch (error) {
            parsedObj = dataToDisplay;
        }
        if (typeof parsedObj === 'object' && parsedObj) {
            logsModal.innerHTML += `<b style='color:#574fa9;'>TS Operation:</b> (${new Date().toLocaleString()}) : ${message}: <b>${key}</b>  <span> <a href="#" class='pull-right copyMeInMemory' id="copyButton"><i class="fa fa-file-o"></i></a></span>  <pre class='displaylogs contentToCopy'>${GenericFunctionality.syntaxHighlight(dataToDisplay)}</pre> <br>`;
        }
        else {
            if (dataToDisplay === undefined) {
                dataToDisplay = 'Undefined object value!';
            }
            if (dataToDisplay !== '') {
                logsModal.innerHTML += `<b style='color:#574fa9;'>TS Operation:</b> (${new Date().toLocaleString()}): ${message}: <b>${key}</b> <span>  <a href="#" class='pull-right copyMeInMemory' id="copyButton"><i class="fa fa-file-o"></i></a></span> <pre class='contentToCopy'>${GenericFunctionality.syntaxHighlight(dataToDisplay)}</pre> <br>`;
            }
            else {
                logsModal.innerHTML += `<b style='color:#574fa9;'>TS Operation:</b> (${new Date().toLocaleString()}): ${message}: <b>${key}</b><br>`;
            }
        }
        let nodeToCopy = document.getElementsByClassName('copyMeInMemory');
        for (let node of nodeToCopy) {
            node.addEventListener('click', function () {
                var _a;
                let ele = (_a = this.parentElement) === null || _a === void 0 ? void 0 : _a.nextElementSibling;
                GenericFunctionality.CopyToClipboard(ele);
            }, false);
        }
    }
    static getKeyValuePairs(obj, prefix = '') {
        let pairs = [];
        for (let key in obj) {
            if (Object.prototype.hasOwnProperty.call(obj, key)) {
                let newKey = prefix ? `${prefix}.${key}` : key;
                let value = obj[key];
                if (typeof value === 'object' && value !== null && !Array.isArray(value)) {
                    pairs = pairs.concat(GenericFunctionality.getKeyValuePairs(value, newKey));
                }
                else {
                    pairs.push({ key: newKey.toUpperCase(), value: value });
                }
            }
        }
        return pairs;
    }
    static removeOptions(selectElement) {
        GenericFunctionality.HtmlLogs(`removeOptions`, `Removing existing options from department dropdown!`, '');
        while (selectElement.options.length) {
            selectElement.remove(0);
        }
        GenericFunctionality.HtmlLogs(`removeOptions`, `options removed.!`, '');
    }
    static addDefaultRecordOnSelectElement(defaultContent, departmentListElement) {
        GenericFunctionality.HtmlLogs(`addDefaultRecordOnSelectElement`, `Adding default rcord on !`, departmentListElement.name);
        let el = document.createElement("option");
        el.textContent = defaultContent;
        el.value = `-1`;
        departmentListElement.appendChild(el);
        GenericFunctionality.HtmlLogs(`addDefaultRecordOnSelectElement`, `Default rcord on !`, departmentListElement.name);
    }
    static toCamelCase(str) {
        if (str.indexOf(`.`) > 0) {
            let arrOfProperty = str.split(".");
            let concateString = ``;
            arrOfProperty.forEach((arrElement, index) => {
                concateString = concateString + arrElement
                    .replace(/\s(.)/g, function ($1) { return $1.toUpperCase(); })
                    .replace(/\s/g, '')
                    .replace(/^(.)/, function ($1) { return $1.toLowerCase(); });
                if (index != arrOfProperty.length - 1) {
                    concateString = concateString + ".";
                }
            });
            return concateString;
        }
        return str
            .replace(/\s(.)/g, function ($1) { return $1.toUpperCase(); })
            .replace(/\s/g, '')
            .replace(/^(.)/, function ($1) { return $1.toLowerCase(); });
    }
    static buildUrl(baseUrs, UseBrowserCache, params, args) {
        const prms = params === null || params === void 0 ? void 0 : params.map((value, index) => {
            return `${value}=${args[index]}`;
        });
        if (params) {
            return `${baseUrs}?UseCache=${UseBrowserCache}&${prms.join(`&`)}`;
        }
        else {
            return `${baseUrs}?UseCache=${UseBrowserCache}`;
        }
    }
}
const InsertNodeDynamicly = function () {
    const IsFileAlreadyRendered = function (moduleName, tag) {
        const moduleNodes = document.querySelectorAll(tag);
        const moduleNodesArray = Array.from(moduleNodes);
        let listOfAvailableTags = moduleNodesArray.filter((value, index) => {
            if (tag == "link") {
                let cssTag = value;
                if (cssTag.href.toLowerCase().indexOf(moduleName.toLowerCase()) > -1) {
                    let newLinkTag = document.createElement(tag);
                    newLinkTag.href = moduleNodes[index].href;
                    newLinkTag.rel = "stylesheet";
                    document.head.appendChild(newLinkTag);
                    document.head.removeChild(newLinkTag);
                    return true;
                }
            }
            else if (tag == "script") {
                let jsTag = value;
                if (jsTag.src.toLowerCase().indexOf(moduleName.toLowerCase()) > -1) {
                    let newLinkTag = document.createElement(tag);
                    newLinkTag.src = moduleNodes[index].src;
                    document.body.appendChild(newLinkTag);
                    document.body.removeChild(newLinkTag);
                    return true;
                }
            }
            return false;
        });
        if (listOfAvailableTags.length > 0) {
            return true;
        }
        return false;
    };
    const InsertNodeElement = function (url, elementTagType, location, version) {
        if (elementTagType === "link") {
            const styleTag = document.createElement(elementTagType);
            styleTag.setAttribute('href', `${url}?v=${version}`);
            styleTag.setAttribute('rel', `stylesheet`);
            location.appendChild(styleTag);
        }
        else {
            const scriptTag = document.createElement(elementTagType);
            scriptTag.setAttribute('src', `${url}?v=${version}`);
            scriptTag.defer = true;
            scriptTag.type = "module";
            location.appendChild(scriptTag);
        }
        return true;
    };
    const loadJS = function (url, location, partialViewName, version) {
        const isNodeAlreadyExists = IsFileAlreadyRendered(partialViewName, "script");
        if (!isNodeAlreadyExists) {
            InsertNodeElement(url, "script", location, version);
        }
    };
    const loadCss = function (url, location, partialViewName, version) {
        const isNodeAlreadyExists = IsFileAlreadyRendered(partialViewName, "link");
        if (!isNodeAlreadyExists) {
            InsertNodeElement(url, "link", location, version);
        }
    };
    return {
        loadJS: loadJS,
        loadCss: loadCss,
    };
}();


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
/*!***************************************!*\
  !*** ./UIComponents/SPAModuleList.ts ***!
  \***************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SPAModules: () => (/* binding */ SPAModules)
/* harmony export */ });
/* harmony import */ var _Security_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Security/utils */ "./Security/utils.ts");

const SPAModules = function (AssetsStaticPath, ModuleName, isCssModuleAvailable, isJsModuleAvailable, jsVersion, cssVersion) {
    if (isJsModuleAvailable)
        _Security_utils__WEBPACK_IMPORTED_MODULE_0__.InsertNodeDynamicly.loadJS(`${AssetsStaticPath}/scripts/${ModuleName.toLowerCase()}.min.js`, document.body, ModuleName, jsVersion);
    if (isCssModuleAvailable)
        _Security_utils__WEBPACK_IMPORTED_MODULE_0__.InsertNodeDynamicly.loadCss(`${AssetsStaticPath}/styles/${ModuleName.toLowerCase()}.css`, document.head, ModuleName, cssVersion);
};

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dURBQXVELGlCQUFpQjtXQUN4RTtXQUNBLGdEQUFnRCxhQUFhO1dBQzdEOzs7Ozs7Ozs7Ozs7O0FDTjRDO0FBR3JDLE1BQU0sVUFBVSxHQUFHLFVBQVMsZ0JBQXVCLEVBQUMsVUFBMkIsRUFBQyxvQkFBNEIsRUFBQyxtQkFBMkIsRUFBQyxTQUFnQixFQUFDLFVBQWlCO0lBQ2xMLElBQUcsbUJBQW1CO1FBQ3RCLGdFQUEwQixDQUFDLE1BQU0sQ0FBQyxHQUFHLGdCQUFnQixZQUFZLFVBQVUsQ0FBQyxXQUFXLEVBQUUsU0FBUyxFQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUMsVUFBVSxFQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ3ZJLElBQUcsb0JBQW9CO1FBQ3ZCLGdFQUEwQixDQUFDLE9BQU8sQ0FBQyxHQUFHLGdCQUFnQixXQUFXLFVBQVUsQ0FBQyxXQUFXLEVBQUUsTUFBTSxFQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUMsVUFBVSxFQUFDLFVBQVUsQ0FBQyxDQUFDO0FBOEJySSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2NvcGVlcnAvLi9TZWN1cml0eS91dGlscy50cyIsIndlYnBhY2s6Ly9zY29wZWVycC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9zY29wZWVycC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vc2NvcGVlcnAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9zY29wZWVycC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3Njb3BlZXJwLy4vVUlDb21wb25lbnRzL1NQQU1vZHVsZUxpc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVmaW5lRHJpdmVyIH0gZnJvbSBcImxvY2FsZm9yYWdlXCI7XHJcbmltcG9ydCAqIGFzIF90eXBlIGZyb20gXCIuLi9DdXN0b21UeXBlL2N1c3RvbVR5cGVzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgY2lwaGVyID0gc2FsdCA9PiB7XHJcbiAgY29uc3QgdGV4dFRvQ2hhcnMgPSB0ZXh0ID0+IHRleHQuc3BsaXQoJycpLm1hcChjID0+IGMuY2hhckNvZGVBdCgwKSk7XHJcbiAgY29uc3QgYnl0ZUhleCA9IG4gPT4gKFwiMFwiICsgTnVtYmVyKG4pLnRvU3RyaW5nKDE2KSkuc3Vic3RyKC0yKTtcclxuICBjb25zdCBhcHBseVNhbHRUb0NoYXIgPSBjb2RlID0+IHRleHRUb0NoYXJzKHNhbHQpLnJlZHVjZSgoYSwgYikgPT4gYSBeIGIsIGNvZGUpO1xyXG5cclxuICByZXR1cm4gdGV4dCA9PiB0ZXh0LnNwbGl0KCcnKVxyXG4gICAgLm1hcCh0ZXh0VG9DaGFycylcclxuICAgIC5tYXAoYXBwbHlTYWx0VG9DaGFyKVxyXG4gICAgLm1hcChieXRlSGV4KVxyXG4gICAgLmpvaW4oJycpO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZGVjaXBoZXIgPSBzYWx0ID0+IHtcclxuICBjb25zdCB0ZXh0VG9DaGFycyA9IHRleHQgPT4gdGV4dC5zcGxpdCgnJykubWFwKGMgPT4gYy5jaGFyQ29kZUF0KDApKTtcclxuICBjb25zdCBhcHBseVNhbHRUb0NoYXIgPSBjb2RlID0+IHRleHRUb0NoYXJzKHNhbHQpLnJlZHVjZSgoYSwgYikgPT4gYSBeIGIsIGNvZGUpO1xyXG4gIHJldHVybiBlbmNvZGVkID0+IGVuY29kZWQubWF0Y2goLy57MSwyfS9nKVxyXG4gICAgLm1hcChoZXggPT4gcGFyc2VJbnQoaGV4LCAxNikpXHJcbiAgICAubWFwKGFwcGx5U2FsdFRvQ2hhcilcclxuICAgIC5tYXAoY2hhckNvZGUgPT4gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSkpXHJcbiAgICAuam9pbignJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBHZW5lcmljRnVuY3Rpb25hbGl0eSB7XHJcbiAgc3RhdGljIGdldEZvcm1hdHRlZERhdGUoZGF0ZSkge1xyXG4gICAgY29uc3QgZGF5ID0gZGF0ZS5nZXREYXRlKCk7XHJcbiAgICBjb25zdCBtb250aCA9IGRhdGUuZ2V0TW9udGgoKSArIDE7XHJcbiAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkuc2xpY2UoMik7XHJcbiAgICByZXR1cm4gZGF5ICsgJy0nICsgbW9udGggKyAnLScgKyB5ZWFyO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ29weSB0byBjbGlwYm9hcmQgZWxlbWVudCdzIHRleHQgY2hpbGRyZW4gd2l0aG91dCBodG1sIFRBRyBuYW1lLlxyXG4gICAqIEBwYXJhbSBlbGUgZWxlbWVudCB3aGljaCBpcyBnZXR0aW5nIGNvcGllZC5cclxuICAgKi9cclxuICBzdGF0aWMgQ29weVRvQ2xpcGJvYXJkKGVsZSkge1xyXG4gICAgbGV0IHIgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xyXG4gICAgci5zZWxlY3ROb2RlKGVsZSBhcyBIVE1MRWxlbWVudCkhO1xyXG4gICAgd2luZG93IS5nZXRTZWxlY3Rpb24oKSEucmVtb3ZlQWxsUmFuZ2VzKCk7XHJcbiAgICB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkhLmFkZFJhbmdlKHIpO1xyXG4gICAgZG9jdW1lbnQhLmV4ZWNDb21tYW5kKCdjb3B5Jyk7XHJcbiAgICB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkhLnJlbW92ZUFsbFJhbmdlcygpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzaXplIEltYWdlXHJcbiAgICogQHBhcmFtIGZpbGUgRmlsZS5cclxuICAgKiBAcmV0dXJucyB2b2lkLlxyXG4gICAqL1xyXG4gIHN0YXRpYyByZXNpemVJbWFnZShmaWxlOiBGaWxlKSB7XHJcbiAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG5cclxuICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XHJcblxyXG4gICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW52YXMnKSEgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJykhO1xyXG5cclxuICAgICAgICBjb25zdCBtYXhXaWR0aCA9IDEwMjQ7XHJcbiAgICAgICAgY29uc3QgbWF4SGVpZ2h0ID0gMTAyNDtcclxuICAgICAgICBsZXQgd2lkdGggPSBpbWcud2lkdGg7XHJcbiAgICAgICAgbGV0IGhlaWdodCA9IGltZy5oZWlnaHQ7XHJcblxyXG4gICAgICAgIGlmICh3aWR0aCA+IG1heFdpZHRoIHx8IGhlaWdodCA+IG1heEhlaWdodCkge1xyXG4gICAgICAgICAgaWYgKHdpZHRoID4gaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIGhlaWdodCA9IE1hdGgucm91bmQoKG1heFdpZHRoIC8gd2lkdGgpICogaGVpZ2h0KTtcclxuICAgICAgICAgICAgd2lkdGggPSBtYXhXaWR0aDtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHdpZHRoID0gTWF0aC5yb3VuZCgobWF4SGVpZ2h0IC8gaGVpZ2h0KSAqIHdpZHRoKTtcclxuICAgICAgICAgICAgaGVpZ2h0ID0gbWF4SGVpZ2h0O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCwgd2lkdGgsIGhlaWdodCk7XHJcblxyXG4gICAgICAgIC8vIENvbnZlcnQgY2FudmFzIHRvIEJsb2IgYW5kIGNyZWF0ZSBhIG5ldyBmaWxlXHJcbiAgICAgICAgY2FudmFzLnRvQmxvYihmdW5jdGlvbiAoYmxvYikge1xyXG4gICAgICAgICAgY29uc3QgcmVzaXplZEZpbGUgPSBuZXcgRmlsZShbYmxvYiFdLCBmaWxlLm5hbWUsIHtcclxuICAgICAgICAgICAgdHlwZTogZmlsZS50eXBlLFxyXG4gICAgICAgICAgICBsYXN0TW9kaWZpZWQ6IERhdGUubm93KClcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdSZXNpemVkIGZpbGU6JywgcmVzaXplZEZpbGUpO1xyXG5cclxuICAgICAgICAgIC8vIE5vdyB5b3UgY2FuIHVwbG9hZCB0aGUgcmVzaXplZCBmaWxlIHRvIHlvdXIgc2VydmVyIG9yIHBlcmZvcm0gb3RoZXIgYWN0aW9uc1xyXG4gICAgICAgIH0sIGZpbGUudHlwZSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBpbWchLnNyYyA9IGV2ZW50LnRhcmdldCEucmVzdWx0IGFzIHN0cmluZztcclxuICAgIH07XHJcblxyXG4gICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XHJcbiAgfVxyXG4gIC8qKlxyXG4gKiBSZWN1cnNpdmUgbWV0aG9kIGZvciBjb252ZXJ0aW5nIG9iamVjdCB0byBGb3JtRGF0YS5cclxuICogQHBhcmFtIGZvcm1kYXRhIEZvcm1EYXRhIHR5cGUuXHJcbiAqIEBwYXJhbSBkYXRhIG9iamVjdCB0eXBlLlxyXG4gKiBAcGFyYW0gcGFyZW50S2V5IHN0cmluZyB0eXBlLlxyXG4gKiBAcmV0dXJucyB2b2lkLlxyXG4gKi9cclxuICBzdGF0aWMgYXBwZW5kRm9ybURhdGEoZm9ybURhdGE6IEZvcm1EYXRhLCBkYXRhOiBvYmplY3QsIHBhcmVudEtleT86IHN0cmluZykge1xyXG5cclxuICAgIGlmIChkYXRhICYmIHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJiAhKGRhdGEgaW5zdGFuY2VvZiBGaWxlKSkge1xyXG4gICAgICBPYmplY3Qua2V5cyhkYXRhKS5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgICAgR2VuZXJpY0Z1bmN0aW9uYWxpdHkuYXBwZW5kRm9ybURhdGEoZm9ybURhdGEsIGRhdGFba2V5XSwgcGFyZW50S2V5ID8gYCR7cGFyZW50S2V5fVske2tleX1dYCA6IGtleSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcGFyZW50S2V5ID0gcGFyZW50S2V5ISBhcyBzdHJpbmc7XHJcbiAgICAgIGZvcm1EYXRhLmFwcGVuZChwYXJlbnRLZXksIGRhdGEpO1xyXG4gICAgfVxyXG5cclxuICB9XHJcbiAgLy8gc3RhdGljIG9iajJGb3JtRGF0YShvYmosIGZvcm1EYXRhSW4gPSBuZXcgRm9ybURhdGEoKSk6IEZvcm1EYXRhIHtcclxuXHJcbiAgLy8gICBsZXQgZm9ybURhdGE6IEZvcm1EYXRhID0gZm9ybURhdGFJbjtcclxuXHJcbiAgLy8gICBsZXQgY3JlYXRlRm9ybURhdGE6IGFueSA9IGZ1bmN0aW9uIChvYmosIHN1YktleVN0ciA9ICcnKSB7XHJcbiAgLy8gICAgIGZvciAobGV0IGkgaW4gb2JqKSB7XHJcbiAgLy8gICAgICAgLy9sZXQgdmFsdWU6dW5rbm93biA9IG9ialtpXSEgO1xyXG4gIC8vICAgICAgIGxldCBzdWJLZXlTdHJUcmFucyA9IHN1YktleVN0ciA/IHN1YktleVN0ciArICdbJyArIGkgKyAnXScgOiBpO1xyXG5cclxuICAvLyAgICAgICBpZiAodHlwZW9mIChvYmpbaV0pID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgKG9ialtpXSkgPT09ICdudW1iZXInKSB7XHJcblxyXG4gIC8vICAgICAgICAgZm9ybURhdGEuYXBwZW5kKHN1YktleVN0clRyYW5zLCBTdHJpbmcob2JqW2ldKSk7XHJcblxyXG4gIC8vICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIChvYmpbaV0pID09PSAnb2JqZWN0Jykge1xyXG5cclxuICAvLyAgICAgICAgIGNyZWF0ZUZvcm1EYXRhKG9ialtpXSwgc3ViS2V5U3RyVHJhbnMpO1xyXG5cclxuICAvLyAgICAgICB9XHJcbiAgLy8gICAgIH1cclxuICAvLyAgIH1cclxuXHJcbiAgLy8gICBjcmVhdGVGb3JtRGF0YShvYmopO1xyXG5cclxuICAvLyAgIHJldHVybiBmb3JtRGF0YTtcclxuICAvLyB9XHJcbiAgLyoqXHJcbiAgICogVG8gbnVsbGlmeSBlbGVtZW50cyB2YWx1ZSBvbiBmb3JtIGJlZm9yZSBzdWJtaXRpbmcgdG8gYXBpIHdoaWNoIGFyZSBub3QgcmVxdWlyZWQuXHJcbiAgICogQHBhcmFtIG9iamVjdFRvU3VibWl0Rm9ybSBvYmplY3QgdHlwZS5cclxuICAgKiBAcGFyYW0gZWxlbWVudCBIVE1MRWxlbWVudCB0eXBlLlxyXG4gICAqIEBwYXJhbSBrZXkgc3RyaW5nIHR5cGUuXHJcbiAgICogQHBhcmFtIHZhbHVlIG9iamVjdCB0eXBlLlxyXG4gICAqIEByZXR1cm5zIHZvaWQuXHJcbiAgICovXHJcbiAgc3RhdGljIHJlbW92ZU5vdFJlcXVpcmVkUHJvcGVydGllcyhvYmplY3RUb1N1Ym1pdEZvcm06IG9iamVjdCwgZWxlbWVudDogSFRNTEVsZW1lbnQsIGtleTogc3RyaW5nLHZhbHVlOiBfdHlwZS5QcmltaXRpdmUpIHtcclxuXHJcbiAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50Lmhhc0F0dHJpYnV0ZSgnZG9udGNvdW50JykgPT0gdHJ1ZSkge1xyXG4gICAgICBvYmplY3RUb1N1Ym1pdEZvcm1ba2V5XSA9IG51bGxcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAvL29iamVjdFRvU3VibWl0Rm9ybVtrZXldID0gdmFsdWU7XHJcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgb2JqZWN0VG9TdWJtaXRGb3JtW2tleV0gPSB2YWx1ZSBhcyBzdHJpbmc7XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICBvYmplY3RUb1N1Ym1pdEZvcm1ba2V5XSA9IHZhbHVlIGFzIGJvb2xlYW47XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgIG9iamVjdFRvU3VibWl0Rm9ybVtrZXldID0gdmFsdWUgYXMgbnVtYmVyO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCl7XHJcbiAgICAgICAgICBvYmplY3RUb1N1Ym1pdEZvcm1ba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgb2JqZWN0VG9TdWJtaXRGb3JtW2tleV0gPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgXHJcbiAgLyoqXHJcbiAqIFRvIENyZWF0ZSBOZXN0ZWQgT2JqZWN0LlxyXG4gKiBAcGFyYW0gb2JqIG9iamVjdCB0eXBlLlxyXG4gKiBAcGFyYW0gcGF0aCBIVE1MRWxlbWVudCBuYW1lIHdpdGggb3Igd2l0aG91dCAuIGNoYXJhY3Rlci5cclxuICogQHBhcmFtIHZhbHVlIG9iamVjdCB0eXBlLlxyXG4gKiBAcmV0dXJucyB2b2lkLlxyXG4gKi9cclxuICAvLyBzdGF0aWMgQ3JlYXRlTmVzdGVkT2JqZWN0KG9iajogb2JqZWN0LCBwYXRoOiBzdHJpbmcsIHZhbHVlOiBvYmplY3QgfCBzdHJpbmcgfCBib29sZWFuIHwgbnVtYmVyICkge1xyXG5cclxuICAvLyAgIGNvbnN0IGtleXMgPSBwYXRoLnNwbGl0KCcuJyk7XHJcbiAgLy8gICBsZXQgY3VycmVudCA9IG9iajtcclxuICAvLyAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGggLSAxOyBpKyspIHtcclxuICAvLyAgICAgaWYgKCFjdXJyZW50W2tleXNbaV1dKSB7XHJcbiAgLy8gICAgICAgY3VycmVudFtrZXlzW2ldXSA9IHt9O1xyXG4gIC8vICAgICB9XHJcbiAgLy8gICAgIGN1cnJlbnQgPSBjdXJyZW50W2tleXNbaV1dO1xyXG4gIC8vICAgfVxyXG4gIC8vICAgY3VycmVudFtrZXlzW2tleXMubGVuZ3RoIC0gMV1dID0gdmFsdWU7XHJcbiAgLy8gfVxyXG5cclxuICBzdGF0aWMgQ3JlYXRlTmVzdGVkT2JqZWN0KG9iajogb2JqZWN0LCBwYXRoOiBzdHJpbmcsIHZhbHVlOiBfdHlwZS5QcmltaXRpdmUpIHtcclxuICAgIGNvbnN0IGtleXMgPSBwYXRoLnNwbGl0KCcuJyk7XHJcbiAgICBsZXQgY3VycmVudDogYW55ID0gb2JqO1xyXG4gIFxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aCAtIDE7IGkrKykge1xyXG4gICAgICBpZiAoIWN1cnJlbnRba2V5c1tpXV0pIHtcclxuICAgICAgICBjdXJyZW50W2tleXNbaV1dID0ge307XHJcbiAgICAgIH1cclxuICAgICAgY3VycmVudCA9IGN1cnJlbnRba2V5c1tpXV07XHJcbiAgICB9XHJcbiAgXHJcbiAgICBjb25zdCBmaW5hbEtleSA9IGtleXNba2V5cy5sZW5ndGggLSAxXTtcclxuICBcclxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIGN1cnJlbnRbZmluYWxLZXldID0gdmFsdWUgYXMgc3RyaW5nO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykge1xyXG4gICAgICBjdXJyZW50W2ZpbmFsS2V5XSA9IHZhbHVlIGFzIGJvb2xlYW47XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgY3VycmVudFtmaW5hbEtleV0gPSB2YWx1ZSBhcyBudW1iZXI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjdXJyZW50W2ZpbmFsS2V5XSA9IHZhbHVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiogVG8gc2VsZWN0IGRyb3Bkb3duIG9wdGlvbiBzZWxlY3RlZC5cclxuKiBAcGFyYW0gc2VsZWN0T2JqIEhUTUxTZWxlY3RFbGVtZW50IHR5cGUuXHJcbiogQHBhcmFtIHZhbHVlVG9TZXQgbnVtYmVyL3N0cmluZy9vYmplY3QgdHlwZS5cclxuKiBAcmV0dXJucyB2b2lkLlxyXG4qL1xyXG4gIHN0YXRpYyBTZXRTZWxlY3RlZFZhbHVlKHNlbGVjdE9iajogSFRNTFNlbGVjdEVsZW1lbnQsIHZhbHVlVG9TZXQ6IG51bWJlciB8IHN0cmluZyB8IG9iamVjdCkge1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxlY3RPYmoub3B0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAoc2VsZWN0T2JqLm9wdGlvbnNbaV0udmFsdWUgPT0gdmFsdWVUb1NldCkge1xyXG4gICAgICAgIHNlbGVjdE9iai5vcHRpb25zW2ldLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICBzZWxlY3RPYmouc2VsZWN0ZWRJbmRleCA9IGk7XHJcbiAgICAgICAgR2VuZXJpY0Z1bmN0aW9uYWxpdHkuSHRtbExvZ3MoYFNldFNlbGVjdGVkVmFsdWVgLCBgT3B0aW9uIHZhbHVlIHNlbGVjdGVkIWAsIHNlbGVjdE9iai5vcHRpb25zW2ldLnRleHQpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBzdGF0aWMgU2V0U2VsZWN0ZWRWYWx1ZUJ5VGV4dChzZWxlY3RPYmo6IEhUTUxTZWxlY3RFbGVtZW50LCB2YWx1ZVRvU2V0KSB7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGVjdE9iai5vcHRpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmIChzZWxlY3RPYmoub3B0aW9uc1tpXS50ZXh0ID09IHZhbHVlVG9TZXQpIHtcclxuICAgICAgICBzZWxlY3RPYmoub3B0aW9uc1tpXS5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgc2VsZWN0T2JqLnNlbGVjdGVkSW5kZXggPSBpO1xyXG4gICAgICAgIEdlbmVyaWNGdW5jdGlvbmFsaXR5Lkh0bWxMb2dzKGBTZXRTZWxlY3RlZFZhbHVlQnlUZXh0YCwgYE9wdGlvbiB2YWx1ZSBzZWxlY3RlZCFgLCBzZWxlY3RPYmoub3B0aW9uc1tpXS50ZXh0KTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vZ2V0IGZvcm0gZWxlbWVudCBrZXkgdmFsdWVzXHJcbiAgc3RhdGljIGdldEZvcm1FbGVtZW50S2V5VmFsdWVQYWlycyhmb3JtOiBGb3JtRGF0YSkge1xyXG4gICAgR2VuZXJpY0Z1bmN0aW9uYWxpdHkuSHRtbExvZ3MoYGdldEZvcm1FbGVtZW50S2V5VmFsdWVQYWlycyAtYCwgYEdldHRpbmcga2V5IHZhbHVlIHBhaXIgb2YgZm9ybSBlbGVtZW50YCwgJycpXHJcbiAgICBsZXQgZm9ybUtleVZhbHVlUGFpckVsZW1lbnQ6IF90eXBlLkZvcm1LZXlWYWx1ZVBhaXJFbGVtZW50W10gPSBbXTtcclxuICAgIFsuLi5mb3JtXS5mb3JFYWNoKChzaW5nbGVFbGVtZW50KSA9PiB7XHJcbiAgICAgIGZvcm1LZXlWYWx1ZVBhaXJFbGVtZW50LnB1c2goeyBrZXk6IHNpbmdsZUVsZW1lbnRbMF0udG9VcHBlckNhc2UoKSwgYWN0dWFsS2V5OiBzaW5nbGVFbGVtZW50WzBdLCB2YWx1ZTogc2luZ2xlRWxlbWVudFsxXSwgaHRtbEVsZW1lbnQ6IHNpbmdsZUVsZW1lbnQsIH0pXHJcbiAgICB9KVxyXG4gICAgR2VuZXJpY0Z1bmN0aW9uYWxpdHkuSHRtbExvZ3MoYGdldEZvcm1FbGVtZW50S2V5VmFsdWVQYWlycyAtYCwgYEtleSBWYWx1ZSBwYWlyYCwgZm9ybUtleVZhbHVlUGFpckVsZW1lbnQpXHJcbiAgICByZXR1cm4gZm9ybUtleVZhbHVlUGFpckVsZW1lbnQ7XHJcbiAgfVxyXG4gIHN0YXRpYyBwcmV0dHlKKGpzb24pIHtcclxuICAgIGlmICh0eXBlb2YganNvbiAhPT0gJ3N0cmluZycpIHtcclxuICAgICAganNvbiA9IEpTT04uc3RyaW5naWZ5KGpzb24sIHVuZGVmaW5lZCwgMik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ganNvbi5yZXBsYWNlKC8oXCIoXFxcXHVbYS16QS1aMC05XXs0fXxcXFxcW151XXxbXlxcXFxcIl0pKlwiKFxccyo6KT98XFxiKHRydWV8ZmFsc2V8bnVsbClcXGJ8LT9cXGQrKD86XFwuXFxkKik/KD86W2VFXVsrXFwtXT9cXGQrKT8pL2csXHJcbiAgICAgIGZ1bmN0aW9uIChtYXRjaCkge1xyXG4gICAgICAgIGxldCBjbHMgPSBcIlxceDFiWzM2bVwiO1xyXG4gICAgICAgIGlmICgvXlwiLy50ZXN0KG1hdGNoKSkge1xyXG4gICAgICAgICAgaWYgKC86JC8udGVzdChtYXRjaCkpIHtcclxuICAgICAgICAgICAgY2xzID0gXCJcXHgxYlszNG1cIjtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNscyA9IFwiXFx4MWJbMzJtXCI7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICgvdHJ1ZXxmYWxzZS8udGVzdChtYXRjaCkpIHtcclxuICAgICAgICAgIGNscyA9IFwiXFx4MWJbMzVtXCI7XHJcbiAgICAgICAgfSBlbHNlIGlmICgvbnVsbC8udGVzdChtYXRjaCkpIHtcclxuICAgICAgICAgIGNscyA9IFwiXFx4MWJbMzFtXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjbHMgKyBtYXRjaCArIFwiXFx4MWJbMG1cIjtcclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9XHJcbiAgc3RhdGljIHN5bnRheEhpZ2hsaWdodChqc29uKSB7XHJcblxyXG4gICAgaWYgKHR5cGVvZiBqc29uICE9ICdzdHJpbmcnKSB7XHJcbiAgICAgIGpzb24gPSBKU09OLnN0cmluZ2lmeShqc29uLCB1bmRlZmluZWQsIDIpO1xyXG4gICAgfVxyXG4gICAganNvbiA9IGpzb24ucmVwbGFjZSgvJi9nLCAnJmFtcDsnKS5yZXBsYWNlKC88L2csICcmbHQ7JykucmVwbGFjZSgvPi9nLCAnJmd0OycpO1xyXG4gICAgcmV0dXJuIGpzb24ucmVwbGFjZSgvKFwiKFxcXFx1W2EtekEtWjAtOV17NH18XFxcXFtedV18W15cXFxcXCJdKSpcIihcXHMqOik/fFxcYih0cnVlfGZhbHNlfG51bGwpXFxifC0/XFxkKyg/OlxcLlxcZCopPyg/OltlRV1bK1xcLV0/XFxkKyk/KS9nLCBmdW5jdGlvbiAobWF0Y2gpIHtcclxuICAgICAgdmFyIGNscyA9ICdudW1iZXInO1xyXG4gICAgICBpZiAoL15cIi8udGVzdChtYXRjaCkpIHtcclxuICAgICAgICBpZiAoLzokLy50ZXN0KG1hdGNoKSkge1xyXG4gICAgICAgICAgY2xzID0gJ2tleSc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNscyA9ICdzdHJpbmcnO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmICgvdHJ1ZXxmYWxzZS8udGVzdChtYXRjaCkpIHtcclxuICAgICAgICBjbHMgPSAnYm9vbGVhbic7XHJcbiAgICAgIH0gZWxzZSBpZiAoL251bGwvLnRlc3QobWF0Y2gpKSB7XHJcbiAgICAgICAgY2xzID0gJ251bGwnO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKCAnPHNwYW4gY2xhc3M9XCInICsgY2xzICsgJ1wiPicgKyBtYXRjaCArICc8L3NwYW4+Jyk7XHJcbiAgICAgIHJldHVybiAnPHNwYW4gY2xhc3M9XCInICsgY2xzICsgJ1wiPicgKyBtYXRjaCArICc8L3NwYW4+JztcclxuICAgIH0pO1xyXG4gIH1cclxuICBzdGF0aWMgSHRtbEFwaUxvZ3MobWVzc2FnZTogc3RyaW5nLCBhcGlMb2dzPzogc3RyaW5nKSB7XHJcbiAgICBpZiAoR2VuZXJpY0Z1bmN0aW9uYWxpdHkuRW52aXJvbm1lbnQgJiYgR2VuZXJpY0Z1bmN0aW9uYWxpdHkuRW52aXJvbm1lbnQgPT0gX3R5cGUuRW52aXJvbm1lbnQuUHJvZHVjdGlvbikge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGxvZ3NNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNsb2dzYCkhIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgbG9nc01vZGFsLmlubmVySFRNTCArPSBgPGIgc3R5bGU9J2NvbG9yOiM1NzRmYTk7Jz5UUyBPcGVyYXRpb246PC9iPiAoJHtuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCl9KTogJHttZXNzYWdlfTogPHByZSBjbGFzcz0nZGlzcGxheWxvZ3MnPiR7YXBpTG9nc308L3ByZT4gPGJyPmA7XHJcbiAgfVxyXG4gIC8vc2V0dGluZyBzZXR1cCBlbnZpcm9ubWVudCB0byBoYW5kbGUgdHJhY2Ugb3BlcmF0aW9ucyBhbmQgb3RoZXJzIHdoaWNoIGFyZSBkZXBlbmRlbnQgb24gU2V0dXBFbnZpcm9ubWVudFxyXG4gIHB1YmxpYyBzdGF0aWMgRW52aXJvbm1lbnQ6IF90eXBlLkVudmlyb25tZW50O1xyXG4gIC8qKlxyXG4gICAqIEFkZCBpdGVtIHRvIGNvb2tpZVxyXG4gICAqIEBwYXJhbSBrZXkga2V5IGZvciBjb29raWUgaXRlbVxyXG4gICAqIEBwYXJhbSB2YWx1ZSAgdmFsdWUgb2YgY29va2llLlxyXG4gICAqIEBwYXJhbSBleHBpcmF0aW9uRGF5cyBleHBpcmF0aW9uIGluIGRheXMuXHJcbiAgICovXHJcbiAgc3RhdGljIGFkZEl0ZW1Ub0Nvb2tpZShrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZywgZXhwaXJhdGlvbkRheXM6IG51bWJlcikge1xyXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgKyAoZXhwaXJhdGlvbkRheXMgKiAyNCAqIDYwICogNjAgKiAxMDAwKSk7XHJcbiAgICBjb25zdCBleHBpcmVzID0gXCI7IGV4cGlyZXM9XCIgKyBkYXRlLnRvVVRDU3RyaW5nKCk7XHJcbiAgICBkb2N1bWVudC5jb29raWUgPSBrZXkgKyBcIj1cIiArIHZhbHVlICsgZXhwaXJlcyArIFwiOyBwYXRoPS9cIjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBDb29raWUgdmFsdWUgZnJvbSBicm93c2VyIGNvb2tpZS5cclxuICAgKiBAcGFyYW0ga2V5IGtleSB0byBmZXRjaCBjb29raWUgZnJvbSBicm93c2VyXHJcbiAgICogQHJldHVybnNcclxuICAgKi9cclxuICBzdGF0aWMgZ2V0Q29va2llKGtleTogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcclxuICAgIGNvbnN0IG5hbWUgPSBrZXkgKyBcIj1cIjtcclxuICAgIGNvbnN0IGRlY29kZWRDb29raWUgPSBkZWNvZGVVUklDb21wb25lbnQoZG9jdW1lbnQuY29va2llKTtcclxuICAgIGNvbnN0IGNvb2tpZUFycmF5ID0gZGVjb2RlZENvb2tpZS5zcGxpdCgnOycpO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29va2llQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgbGV0IGNvb2tpZSA9IGNvb2tpZUFycmF5W2ldO1xyXG4gICAgICB3aGlsZSAoY29va2llLmNoYXJBdCgwKSA9PT0gJyAnKSB7XHJcbiAgICAgICAgY29va2llID0gY29va2llLnN1YnN0cmluZygxKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoY29va2llLmluZGV4T2YobmFtZSkgPT09IDApIHtcclxuICAgICAgICByZXR1cm4gY29va2llLnN1YnN0cmluZyhuYW1lLmxlbmd0aCwgY29va2llLmxlbmd0aCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgfVxyXG4gIC8qKlxyXG4gKiBBZGQgZXhlY3V0aW9uIGxvZyBvbiBMb2cgbW9kYWxcclxuICogQHBhcmFtIG1lc3NhZ2UgTWVzc2FnZSB0byBkaXNwbGF5IG9uIGxvZyB0aXRsZS5cclxuICogQHBhcmFtIGtleSBNZXNzYWdlIGtleS5cclxuICogQHBhcmFtIGRhdGFUb0Rpc3BsYXkgb2JqZWN0IHR5cGUgZGF0YVxyXG4gKiBAcmV0dXJucyB2b2lkLlxyXG4gKi9cclxuICBzdGF0aWMgSHRtbExvZ3MobWVzc2FnZTogc3RyaW5nLCBrZXk/OiBzdHJpbmcsIGRhdGFUb0Rpc3BsYXk/OiBhbnkpOiB2b2lkIHtcclxuICAgIGlmIChHZW5lcmljRnVuY3Rpb25hbGl0eS5FbnZpcm9ubWVudCAmJiBHZW5lcmljRnVuY3Rpb25hbGl0eS5FbnZpcm9ubWVudCA9PSBcIlByb2R1Y3Rpb25cIikge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgbG9nc01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2xvZ3NgKSEgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBpZiAoIWtleSlcclxuICAgICAga2V5ID0gJyc7XHJcblxyXG4gICAgbGV0IHBhcnNlZE9iajogYW55O1xyXG4gICAgdHJ5IHtcclxuICAgICAgcGFyc2VkT2JqID0gSlNPTi5wYXJzZShkYXRhVG9EaXNwbGF5KTtcclxuICAgICAgZGF0YVRvRGlzcGxheSA9IEpTT04uc3RyaW5naWZ5KHBhcnNlZE9iaiwgbnVsbCwgNCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBwYXJzZWRPYmogPSBkYXRhVG9EaXNwbGF5O1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2YgcGFyc2VkT2JqID09PSAnb2JqZWN0JyAmJiBwYXJzZWRPYmopIHtcclxuICAgICAgbG9nc01vZGFsLmlubmVySFRNTCArPSBgPGIgc3R5bGU9J2NvbG9yOiM1NzRmYTk7Jz5UUyBPcGVyYXRpb246PC9iPiAoJHtuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCl9KSA6ICR7bWVzc2FnZX06IDxiPiR7a2V5fTwvYj4gIDxzcGFuPiA8YSBocmVmPVwiI1wiIGNsYXNzPSdwdWxsLXJpZ2h0IGNvcHlNZUluTWVtb3J5JyBpZD1cImNvcHlCdXR0b25cIj48aSBjbGFzcz1cImZhIGZhLWZpbGUtb1wiPjwvaT48L2E+PC9zcGFuPiAgPHByZSBjbGFzcz0nZGlzcGxheWxvZ3MgY29udGVudFRvQ29weSc+JHtHZW5lcmljRnVuY3Rpb25hbGl0eS5zeW50YXhIaWdobGlnaHQoZGF0YVRvRGlzcGxheSl9PC9wcmU+IDxicj5gO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKGRhdGFUb0Rpc3BsYXkgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGRhdGFUb0Rpc3BsYXkgPSAnVW5kZWZpbmVkIG9iamVjdCB2YWx1ZSEnXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkYXRhVG9EaXNwbGF5ICE9PSAnJykge1xyXG4gICAgICAgIGxvZ3NNb2RhbC5pbm5lckhUTUwgKz0gYDxiIHN0eWxlPSdjb2xvcjojNTc0ZmE5Oyc+VFMgT3BlcmF0aW9uOjwvYj4gKCR7bmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygpfSk6ICR7bWVzc2FnZX06IDxiPiR7a2V5fTwvYj4gPHNwYW4+ICA8YSBocmVmPVwiI1wiIGNsYXNzPSdwdWxsLXJpZ2h0IGNvcHlNZUluTWVtb3J5JyBpZD1cImNvcHlCdXR0b25cIj48aSBjbGFzcz1cImZhIGZhLWZpbGUtb1wiPjwvaT48L2E+PC9zcGFuPiA8cHJlIGNsYXNzPSdjb250ZW50VG9Db3B5Jz4ke0dlbmVyaWNGdW5jdGlvbmFsaXR5LnN5bnRheEhpZ2hsaWdodChkYXRhVG9EaXNwbGF5KX08L3ByZT4gPGJyPmA7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgbG9nc01vZGFsLmlubmVySFRNTCArPSBgPGIgc3R5bGU9J2NvbG9yOiM1NzRmYTk7Jz5UUyBPcGVyYXRpb246PC9iPiAoJHtuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCl9KTogJHttZXNzYWdlfTogPGI+JHtrZXl9PC9iPjxicj5gO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IG5vZGVUb0NvcHkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdjb3B5TWVJbk1lbW9yeScpITtcclxuXHJcbiAgICBmb3IgKGxldCBub2RlIG9mIG5vZGVUb0NvcHkpIHtcclxuICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICh0aGlzKSB7XHJcbiAgICAgICAgLy9nZXR0aW5nIGNsaWNrZWQgZWxlbWVudC5cclxuICAgICAgICBsZXQgZWxlID0gKHRoaXMgYXMgSFRNTEFuY2hvckVsZW1lbnQpLnBhcmVudEVsZW1lbnQ/Lm5leHRFbGVtZW50U2libGluZztcclxuICAgICAgICBHZW5lcmljRnVuY3Rpb25hbGl0eS5Db3B5VG9DbGlwYm9hcmQoZWxlKTtcclxuXHJcbiAgICAgIH0sIGZhbHNlKTtcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbiAgLyoqXHJcbiogR2V0IGtleSBhbmQgdmFsdWUgcGFpcnMgZnJvbSBvYmogb2JqZWN0LlxyXG4qIEBwYXJhbSBvYmogb2JqZWN0IG9uIHdoaWNoIHN0cnVjdHVyZWQga2V5IHZhbHVlIHBhaXIgb2JqZWN0IG5lZWQgdG8gY3JlYXRlLlxyXG4qIEBwYXJhbSBwcmVmaXggcHJlZml4IHZhbHVlLlxyXG4qIEByZXR1cm5zIHN0cnVjdHVyZWQgS2V5VmFsdWVQYWlyIG9iamVjdCBhcnJheS5cclxuKi9cclxuICBzdGF0aWMgZ2V0S2V5VmFsdWVQYWlycyhvYmo6IG9iamVjdCwgcHJlZml4OiBzdHJpbmcgPSAnJyk6IF90eXBlLktleVZhbHVlUGFpcltdIHtcclxuICAgIGxldCBwYWlyczogX3R5cGUuS2V5VmFsdWVQYWlyW10gPSBbXTtcclxuXHJcbiAgICBmb3IgKGxldCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgbGV0IG5ld0tleSA9IHByZWZpeCA/IGAke3ByZWZpeH0uJHtrZXl9YCA6IGtleTtcclxuICAgICAgICBsZXQgdmFsdWUgPSAob2JqIGFzIGFueSlba2V5XTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICBwYWlycyA9IHBhaXJzLmNvbmNhdChHZW5lcmljRnVuY3Rpb25hbGl0eS5nZXRLZXlWYWx1ZVBhaXJzKHZhbHVlLCBuZXdLZXkpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcGFpcnMucHVzaCh7IGtleTogbmV3S2V5LnRvVXBwZXJDYXNlKCksIHZhbHVlOiB2YWx1ZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcGFpcnM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZW1vdmUgb3B0aW9ucyBIVE1MU2VsZWN0RWxlbWVudCBlbGVtZW50Li5cclxuICAgKiBAcGFyYW0gc2VsZWN0RWxlbWVudCBIVE1MU2VsZWN0RWxlbWVudCBlbGVtZW50LlxyXG4gICAgKiBAcmV0dXJucyB2b2lkLlxyXG4gICAqL1xyXG4gIHN0YXRpYyByZW1vdmVPcHRpb25zKHNlbGVjdEVsZW1lbnQ6IEhUTUxTZWxlY3RFbGVtZW50KSB7XHJcbiAgICBHZW5lcmljRnVuY3Rpb25hbGl0eS5IdG1sTG9ncyhgcmVtb3ZlT3B0aW9uc2AsIGBSZW1vdmluZyBleGlzdGluZyBvcHRpb25zIGZyb20gZGVwYXJ0bWVudCBkcm9wZG93biFgLCAnJyk7XHJcbiAgICB3aGlsZSAoc2VsZWN0RWxlbWVudC5vcHRpb25zLmxlbmd0aCkge1xyXG4gICAgICBzZWxlY3RFbGVtZW50LnJlbW92ZSgwKTtcclxuICAgIH1cclxuICAgIEdlbmVyaWNGdW5jdGlvbmFsaXR5Lkh0bWxMb2dzKGByZW1vdmVPcHRpb25zYCwgYG9wdGlvbnMgcmVtb3ZlZC4hYCwgJycpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAqIEFkZGluZyBkZWZhdWx0IHJlY29yZCB0byBTZWxlY3QgRWxlbWVudFxyXG4gKiBAcGFyYW0gZGVmYXVsdENvbnRlbnQgc3RyaW5nIHdoaWNoIGlzIGFkZGVkIGFzIGEgZGVmYXVsdCByZWNvcmQuXHJcbiAqIEBwYXJhbSBkZXBhcnRtZW50TGlzdEVsZW1lbnQgSFRNTFNlbGVjdEVsZW1lbnQgZWxlbWVudCBvbiB3aGljaCBkZWZhdWx0Q29udGVudCBnZXQgYWRkZWQuXHJcbiAgKiBAcmV0dXJucyB2b2lkLlxyXG4gKi9cclxuICBzdGF0aWMgYWRkRGVmYXVsdFJlY29yZE9uU2VsZWN0RWxlbWVudChkZWZhdWx0Q29udGVudDogc3RyaW5nLCBkZXBhcnRtZW50TGlzdEVsZW1lbnQ6IEhUTUxTZWxlY3RFbGVtZW50KSB7XHJcbiAgICBHZW5lcmljRnVuY3Rpb25hbGl0eS5IdG1sTG9ncyhgYWRkRGVmYXVsdFJlY29yZE9uU2VsZWN0RWxlbWVudGAsIGBBZGRpbmcgZGVmYXVsdCByY29yZCBvbiAhYCwgZGVwYXJ0bWVudExpc3RFbGVtZW50Lm5hbWUpO1xyXG4gICAgbGV0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgIGVsLnRleHRDb250ZW50ID0gZGVmYXVsdENvbnRlbnQ7XHJcbiAgICBlbC52YWx1ZSA9IGAtMWA7XHJcbiAgICBkZXBhcnRtZW50TGlzdEVsZW1lbnQuYXBwZW5kQ2hpbGQoZWwpO1xyXG4gICAgR2VuZXJpY0Z1bmN0aW9uYWxpdHkuSHRtbExvZ3MoYGFkZERlZmF1bHRSZWNvcmRPblNlbGVjdEVsZW1lbnRgLCBgRGVmYXVsdCByY29yZCBvbiAhYCwgZGVwYXJ0bWVudExpc3RFbGVtZW50Lm5hbWUpO1xyXG4gIH1cclxuICBzdGF0aWMgdG9DYW1lbENhc2Uoc3RyKTogc3RyaW5nIHtcclxuXHJcbiAgICBpZiAoc3RyLmluZGV4T2YoYC5gKSA+IDApIHtcclxuXHJcbiAgICAgIGxldCBhcnJPZlByb3BlcnR5OiBzdHJpbmdbXSA9IHN0ci5zcGxpdChcIi5cIik7XHJcbiAgICAgIGxldCBjb25jYXRlU3RyaW5nOiBzdHJpbmcgPSBgYDtcclxuICAgICAgYXJyT2ZQcm9wZXJ0eS5mb3JFYWNoKChhcnJFbGVtZW50LCBpbmRleCkgPT4ge1xyXG4gICAgICAgIGNvbmNhdGVTdHJpbmcgPSBjb25jYXRlU3RyaW5nICsgYXJyRWxlbWVudFxyXG4gICAgICAgICAgLnJlcGxhY2UoL1xccyguKS9nLCBmdW5jdGlvbiAoJDEpIHsgcmV0dXJuICQxLnRvVXBwZXJDYXNlKCk7IH0pXHJcbiAgICAgICAgICAucmVwbGFjZSgvXFxzL2csICcnKVxyXG4gICAgICAgICAgLnJlcGxhY2UoL14oLikvLCBmdW5jdGlvbiAoJDEpIHsgcmV0dXJuICQxLnRvTG93ZXJDYXNlKCk7IH0pO1xyXG4gICAgICAgIGlmIChpbmRleCAhPSBhcnJPZlByb3BlcnR5Lmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgIGNvbmNhdGVTdHJpbmcgPSBjb25jYXRlU3RyaW5nICsgXCIuXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfSlcclxuICAgICAgcmV0dXJuIGNvbmNhdGVTdHJpbmc7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHJldHVybiBzdHJcclxuICAgICAgLnJlcGxhY2UoL1xccyguKS9nLCBmdW5jdGlvbiAoJDEpIHsgcmV0dXJuICQxLnRvVXBwZXJDYXNlKCk7IH0pXHJcbiAgICAgIC5yZXBsYWNlKC9cXHMvZywgJycpXHJcbiAgICAgIC5yZXBsYWNlKC9eKC4pLywgZnVuY3Rpb24gKCQxKSB7IHJldHVybiAkMS50b0xvd2VyQ2FzZSgpOyB9KTtcclxuICB9XHJcblxyXG4gIC8vdG8gYnVpbGQgYXBpIHVybCBiYXNlZCBvbiByZXF1ZXN0LlxyXG4gIC8qKlxyXG4gKiBUbyBidWlsZCBhcGkgdXJsIGJhc2VkIG9uIHJlcXVlc3QuXHJcbiAqIEBwYXJhbSBiYXNlVXJzIHN0cmluZyB3aGljaCBpcyBhZGRlZCBhcyBhIGRlZmF1bHQgcmVjb3JkLlxyXG4gKiBAcGFyYW0gVXNlQnJvd3NlckNhY2hlIEhUTUxTZWxlY3RFbGVtZW50IGVsZW1lbnQgb24gd2hpY2ggZGVmYXVsdENvbnRlbnQgZ2V0IGFkZGVkLlxyXG4gKiBAcGFyYW0gcGFyYW1zIHF1ZXJ5IHN0cmluZyBwYXJhbWV0ZXJzIGFzIHN0cmluZyBhcnJheS5cclxuKiBAcGFyYW0gcGFyYW1zIGFyZ3MgYXMgYW55IGFycmF5LlxyXG4gKiBAcmV0dXJucyByZXR1cm4gYXBpIHVybC5cclxuICovXHJcbiAgc3RhdGljIGJ1aWxkVXJsKGJhc2VVcnM6IHN0cmluZywgVXNlQnJvd3NlckNhY2hlOiBib29sZWFuLCBwYXJhbXM/OiBzdHJpbmdbXSwgYXJncz86IGFueVtdKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IHBybXMgPSBwYXJhbXM/Lm1hcCgodmFsdWUsIGluZGV4KSA9PiB7XHJcbiAgICAgIHJldHVybiBgJHt2YWx1ZX09JHthcmdzIVtpbmRleF19YDtcclxuICAgIH0pO1xyXG4gICAgaWYgKHBhcmFtcykge1xyXG4gICAgICByZXR1cm4gYCR7YmFzZVVyc30/VXNlQ2FjaGU9JHtVc2VCcm93c2VyQ2FjaGV9JiR7cHJtcyEuam9pbihgJmApfWA7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgcmV0dXJuIGAke2Jhc2VVcnN9P1VzZUNhY2hlPSR7VXNlQnJvd3NlckNhY2hlfWA7XHJcbiAgICB9XHJcblxyXG4gIH1cclxufVxyXG5leHBvcnQgY29uc3QgSW5zZXJ0Tm9kZUR5bmFtaWNseSA9IGZ1bmN0aW9uICgpIHtcclxuICBjb25zdCBJc0ZpbGVBbHJlYWR5UmVuZGVyZWQgPSBmdW5jdGlvbiAobW9kdWxlTmFtZTogc3RyaW5nLCB0YWc6IF90eXBlLlRhZyk6IGJvb2xlYW4ge1xyXG4gICAgY29uc3QgbW9kdWxlTm9kZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRhZyk7XHJcbiAgICBjb25zdCBtb2R1bGVOb2Rlc0FycmF5ID0gQXJyYXkuZnJvbShtb2R1bGVOb2Rlcyk7XHJcblxyXG4gICAgbGV0IGxpc3RPZkF2YWlsYWJsZVRhZ3MgPSBtb2R1bGVOb2Rlc0FycmF5LmZpbHRlcigodmFsdWUsIGluZGV4KSA9PiB7XHJcblxyXG4gICAgICBpZiAodGFnID09IF90eXBlLlRhZy5jc3MpIHtcclxuICAgICAgICBsZXQgY3NzVGFnID0gdmFsdWUgYXMgSFRNTExpbmtFbGVtZW50O1xyXG4gICAgICAgIGlmIChjc3NUYWcuaHJlZi50b0xvd2VyQ2FzZSgpLmluZGV4T2YobW9kdWxlTmFtZS50b0xvd2VyQ2FzZSgpKSA+IC0xKSB7XHJcbiAgICAgICAgICBsZXQgbmV3TGlua1RhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKSBhcyBIVE1MTGlua0VsZW1lbnQ7XHJcbiAgICAgICAgICBuZXdMaW5rVGFnLmhyZWYgPSAobW9kdWxlTm9kZXNbaW5kZXhdIGFzIEhUTUxMaW5rRWxlbWVudCkuaHJlZjtcclxuICAgICAgICAgIG5ld0xpbmtUYWcucmVsID0gXCJzdHlsZXNoZWV0XCI7XHJcbiAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKG5ld0xpbmtUYWcpO1xyXG4gICAgICAgICAgZG9jdW1lbnQuaGVhZC5yZW1vdmVDaGlsZChuZXdMaW5rVGFnKTtcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH0gZWxzZSBpZiAodGFnID09IF90eXBlLlRhZy5zY3JpcHQpIHtcclxuICAgICAgICBsZXQganNUYWcgPSB2YWx1ZSBhcyBIVE1MU2NyaXB0RWxlbWVudDtcclxuICAgICAgICBpZiAoanNUYWcuc3JjLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihtb2R1bGVOYW1lLnRvTG93ZXJDYXNlKCkpID4gLTEpIHtcclxuICAgICAgICAgIGxldCBuZXdMaW5rVGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xyXG4gICAgICAgICAgbmV3TGlua1RhZy5zcmMgPSAobW9kdWxlTm9kZXNbaW5kZXhdIGFzIEhUTUxTY3JpcHRFbGVtZW50KS5zcmM7XHJcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG5ld0xpbmtUYWcpO1xyXG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChuZXdMaW5rVGFnKTtcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9KVxyXG4gICAgLy9pZiBtb2R1bGUgbm9kZSBpcyBhdmFpbGFibGUgaW4gRE9NIHRoZW4gcmV0dXJuIHRydWVcclxuICAgIGlmIChsaXN0T2ZBdmFpbGFibGVUYWdzLmxlbmd0aCA+IDApIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfTtcclxuICBjb25zdCBJbnNlcnROb2RlRWxlbWVudCA9IGZ1bmN0aW9uICh1cmw6IHN0cmluZywgZWxlbWVudFRhZ1R5cGU6IF90eXBlLlRhZywgbG9jYXRpb246IEhUTUxFbGVtZW50LCB2ZXJzaW9uOiBzdHJpbmcpOiBib29sZWFuIHtcclxuXHJcbiAgICBpZiAoZWxlbWVudFRhZ1R5cGUgPT09IF90eXBlLlRhZy5jc3MpIHtcclxuICAgICAgY29uc3Qgc3R5bGVUYWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsZW1lbnRUYWdUeXBlKSEgYXMgSFRNTFN0eWxlRWxlbWVudDtcclxuICAgICAgc3R5bGVUYWcuc2V0QXR0cmlidXRlKCdocmVmJywgYCR7dXJsfT92PSR7dmVyc2lvbn1gKTtcclxuICAgICAgc3R5bGVUYWcuc2V0QXR0cmlidXRlKCdyZWwnLCBgc3R5bGVzaGVldGApO1xyXG4gICAgICBsb2NhdGlvbi5hcHBlbmRDaGlsZChzdHlsZVRhZyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBzY3JpcHRUYWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsZW1lbnRUYWdUeXBlKSEgYXMgSFRNTFNjcmlwdEVsZW1lbnQ7XHJcbiAgICAgIHNjcmlwdFRhZy5zZXRBdHRyaWJ1dGUoJ3NyYycsIGAke3VybH0/dj0ke3ZlcnNpb259YCk7XHJcbiAgICAgIHNjcmlwdFRhZy5kZWZlciA9IHRydWU7XHJcbiAgICAgIHNjcmlwdFRhZy50eXBlID0gXCJtb2R1bGVcIjtcclxuICAgICAgbG9jYXRpb24uYXBwZW5kQ2hpbGQoc2NyaXB0VGFnKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH07XHJcbiAgY29uc3QgbG9hZEpTID0gZnVuY3Rpb24gKHVybDogc3RyaW5nLCBsb2NhdGlvbjogSFRNTEVsZW1lbnQsIHBhcnRpYWxWaWV3TmFtZTogc3RyaW5nLCB2ZXJzaW9uOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGlzTm9kZUFscmVhZHlFeGlzdHMgPSBJc0ZpbGVBbHJlYWR5UmVuZGVyZWQocGFydGlhbFZpZXdOYW1lLCBfdHlwZS5UYWcuc2NyaXB0KTtcclxuICAgIGlmICghaXNOb2RlQWxyZWFkeUV4aXN0cykge1xyXG4gICAgICBJbnNlcnROb2RlRWxlbWVudCh1cmwsIF90eXBlLlRhZy5zY3JpcHQsIGxvY2F0aW9uLCB2ZXJzaW9uKTtcclxuICAgIH1cclxuICB9O1xyXG4gIGNvbnN0IGxvYWRDc3MgPSBmdW5jdGlvbiAodXJsOiBzdHJpbmcsIGxvY2F0aW9uOiBIVE1MRWxlbWVudCwgcGFydGlhbFZpZXdOYW1lOiBzdHJpbmcsIHZlcnNpb246IHN0cmluZykge1xyXG4gICAgY29uc3QgaXNOb2RlQWxyZWFkeUV4aXN0cyA9IElzRmlsZUFscmVhZHlSZW5kZXJlZChwYXJ0aWFsVmlld05hbWUsIF90eXBlLlRhZy5jc3MpO1xyXG5cclxuICAgIGlmICghaXNOb2RlQWxyZWFkeUV4aXN0cykge1xyXG4gICAgICBJbnNlcnROb2RlRWxlbWVudCh1cmwsIF90eXBlLlRhZy5jc3MsIGxvY2F0aW9uLCB2ZXJzaW9uKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgbG9hZEpTOiBsb2FkSlMsXHJcbiAgICBsb2FkQ3NzOiBsb2FkQ3NzLFxyXG4gICAgLy8gSW5pdER5bmFtaWNGaWxlRnVuY3Rpb246SW5pdER5bmFtaWNGaWxlRnVuY3Rpb25cclxuICB9XHJcbn0oKVxyXG5cclxuXHJcblxyXG4vLyBleHBvcnQgY29uc3QgY2lwaGVyID0gZnVuY3Rpb24oc2FsdDpzdHJpbmcpOmFueSB7XHJcbi8vICAgICBjb25zdCB0ZXh0VG9DaGFycyA9IHRleHQgPT4gdGV4dC5zcGxpdCgnJykubWFwKGMgPT4gYy5jaGFyQ29kZUF0KDApKTtcclxuLy8gICAgIGNvbnN0IGJ5dGVIZXggPSBuID0+IChcIjBcIiArIE51bWJlcihuKS50b1N0cmluZygxNikpLnN1YnN0cigtMik7XHJcbi8vICAgICBjb25zdCBhcHBseVNhbHRUb0NoYXIgPSBjb2RlID0+IHRleHRUb0NoYXJzKHNhbHQpLnJlZHVjZSgoYSwgYikgPT4gYSBeIGIsIGNvZGUpO1xyXG5cclxuLy8gICAgIHJldHVybiBmdW5jdGlvbiAodGV4dCkge1xyXG4vLyAgICAgICAgIHRleHQuc3BsaXQoJycpXHJcbi8vICAgICAgICAgLm1hcCh0ZXh0VG9DaGFycylcclxuLy8gICAgICAgICAubWFwKGFwcGx5U2FsdFRvQ2hhcilcclxuLy8gICAgICAgICAubWFwKGJ5dGVIZXgpXHJcbi8vICAgICAgICAgLmpvaW4oJycpXHJcbi8vICAgICB9O1xyXG4vLyB9XHJcblxyXG4vLyBleHBvcnQgY29uc3QgZGVjaXBoZXIgPSBmdW5jdGlvbiAoc2FsdDogc3RyaW5nKTogYW55IHtcclxuLy8gICAgIGNvbnN0IHRleHRUb0NoYXJzID0gdGV4dCA9PiB0ZXh0LnNwbGl0KCcnKS5tYXAoYyA9PiBjLmNoYXJDb2RlQXQoMCkpO1xyXG4vLyAgICAgY29uc3QgYXBwbHlTYWx0VG9DaGFyID0gY29kZSA9PiB0ZXh0VG9DaGFycyhzYWx0KS5yZWR1Y2UoKGEsIGIpID0+IGEgXiBiLCBjb2RlKTtcclxuLy8gICAgIHJldHVybiBlbmNvZGVkID0+IGVuY29kZWQubWF0Y2goLy57MSwyfS9nKVxyXG4vLyAgICAgICAgIC5tYXAoaGV4ID0+IHBhcnNlSW50KGhleCwgMTYpKVxyXG4vLyAgICAgICAgIC5tYXAoYXBwbHlTYWx0VG9DaGFyKVxyXG4vLyAgICAgICAgIC5tYXAoY2hhckNvZGUgPT4gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSkpXHJcbi8vICAgICAgICAgLmpvaW4oJycpO1xyXG4vLyB9XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiaW1wb3J0ICogYXMgX3V0aWxzIGZyb20gXCIuLi9TZWN1cml0eS91dGlsc1wiO1xyXG5pbXBvcnQgKiBhcyBfdHlwZSBmcm9tIFwiLi4vQ3VzdG9tVHlwZS9jdXN0b21UeXBlc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IFNQQU1vZHVsZXMgPSBmdW5jdGlvbihBc3NldHNTdGF0aWNQYXRoOnN0cmluZyxNb2R1bGVOYW1lOl90eXBlLk1vZHVsZU5hbWUsaXNDc3NNb2R1bGVBdmFpbGFibGU6Ym9vbGVhbixpc0pzTW9kdWxlQXZhaWxhYmxlOmJvb2xlYW4sanNWZXJzaW9uOnN0cmluZyxjc3NWZXJzaW9uOnN0cmluZyl7XHJcbmlmKGlzSnNNb2R1bGVBdmFpbGFibGUpXHJcbl91dGlscy5JbnNlcnROb2RlRHluYW1pY2x5LmxvYWRKUyhgJHtBc3NldHNTdGF0aWNQYXRofS9zY3JpcHRzLyR7TW9kdWxlTmFtZS50b0xvd2VyQ2FzZSgpfS5taW4uanNgLGRvY3VtZW50LmJvZHksTW9kdWxlTmFtZSxqc1ZlcnNpb24pO1xyXG5pZihpc0Nzc01vZHVsZUF2YWlsYWJsZSlcclxuX3V0aWxzLkluc2VydE5vZGVEeW5hbWljbHkubG9hZENzcyhgJHtBc3NldHNTdGF0aWNQYXRofS9zdHlsZXMvJHtNb2R1bGVOYW1lLnRvTG93ZXJDYXNlKCl9LmNzc2AsZG9jdW1lbnQuaGVhZCxNb2R1bGVOYW1lLGNzc1ZlcnNpb24pO1xyXG5cclxuICAgIC8vIHN3aXRjaCAoTW9kdWxlTmFtZSkge1xyXG4gICAgLy8gICAgIGNhc2UgIF90eXBlLk1vZHVsZU5hbWUuRGFzaEJvYXJkOlxyXG4gICAgICAgIFxyXG4gICAgLy8gICAgIGlmKGlzSnNNb2R1bGVBdmFpbGFibGUpXHJcbiAgICAvLyAgICAgICAgIF91dGlscy5JbnNlcnROb2RlRHluYW1pY2x5LmxvYWRKUyhgJHtBc3NldHNTdGF0aWNQYXRofS9zY3JpcHRzLyR7TW9kdWxlTmFtZS50b0xvd2VyQ2FzZSgpfS5taW4uanNgLGRvY3VtZW50LmJvZHksTW9kdWxlTmFtZSxqc1ZlcnNpb24pO1xyXG4gICAgLy8gICAgIGlmKGlzQ3NzTW9kdWxlQXZhaWxhYmxlKVxyXG4gICAgLy8gICAgICAgICBfdXRpbHMuSW5zZXJ0Tm9kZUR5bmFtaWNseS5sb2FkQ3NzKGAke0Fzc2V0c1N0YXRpY1BhdGh9L3N0eWxlcy8ke01vZHVsZU5hbWUudG9Mb3dlckNhc2UoKX0uY3NzYCxkb2N1bWVudC5oZWFkLE1vZHVsZU5hbWUsY3NzVmVyc2lvbik7XHJcbiAgICAgICAgXHJcbiAgICAvLyAgICAgYnJlYWs7XHJcbiAgICAvLyAgICAgY2FzZSBfdHlwZS5Nb2R1bGVOYW1lLmlpZmVJbmRleFBhZ2VGdW5jdGlvbjpcclxuICAgIC8vICAgICAgICAgaWYoaXNKc01vZHVsZUF2YWlsYWJsZSlcclxuICAgIC8vICAgICAgICAgICAgIF91dGlscy5JbnNlcnROb2RlRHluYW1pY2x5LmxvYWRKUyhgJHtBc3NldHNTdGF0aWNQYXRofS9zY3JpcHRzLyR7TW9kdWxlTmFtZS50b0xvd2VyQ2FzZSgpfS5taW4uanNgLGRvY3VtZW50LmJvZHksTW9kdWxlTmFtZSxqc1ZlcnNpb24pO1xyXG4gICAgLy8gICAgICAgICBpZihpc0Nzc01vZHVsZUF2YWlsYWJsZSlcclxuICAgIC8vICAgICAgICAgICAgIF91dGlscy5JbnNlcnROb2RlRHluYW1pY2x5LmxvYWRDc3MoYCR7QXNzZXRzU3RhdGljUGF0aH0vc3R5bGVzLyR7TW9kdWxlTmFtZS50b0xvd2VyQ2FzZSgpfS5jc3NgLGRvY3VtZW50LmhlYWQsTW9kdWxlTmFtZSxjc3NWZXJzaW9uKTtcclxuICAgICAgICAgICAgXHJcbiAgICAvLyAgICAgICAgIGJyZWFrO1xyXG4gICAgLy8gICAgIGNhc2UgIF90eXBlLk1vZHVsZU5hbWUuQXV0aG9ySW5kZXg6XHJcbiAgICAgICAgXHJcbiAgICAvLyAgICAgICAgIGlmKGlzSnNNb2R1bGVBdmFpbGFibGUpXHJcbiAgICAvLyAgICAgICAgICAgICBfdXRpbHMuSW5zZXJ0Tm9kZUR5bmFtaWNseS5sb2FkSlMoYCR7QXNzZXRzU3RhdGljUGF0aH0vc2NyaXB0cy8ke01vZHVsZU5hbWUudG9Mb3dlckNhc2UoKX0ubWluLmpzYCxkb2N1bWVudC5ib2R5LE1vZHVsZU5hbWUsanNWZXJzaW9uKTtcclxuICAgIC8vICAgICAgICAgaWYoaXNDc3NNb2R1bGVBdmFpbGFibGUpXHJcbiAgICAvLyAgICAgICAgICAgICBfdXRpbHMuSW5zZXJ0Tm9kZUR5bmFtaWNseS5sb2FkQ3NzKGAke0Fzc2V0c1N0YXRpY1BhdGh9L3N0eWxlcy8ke01vZHVsZU5hbWUudG9Mb3dlckNhc2UoKX0uY3NzYCxkb2N1bWVudC5oZWFkLE1vZHVsZU5hbWUsY3NzVmVyc2lvbik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgLy8gICAgICAgICBicmVhaztcclxuICAgIFxyXG4gICAgLy8gICAgIGRlZmF1bHQ6XHJcbiAgICAvLyAgICAgICAgIGJyZWFrO1xyXG4gICAgLy8gfVxyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9