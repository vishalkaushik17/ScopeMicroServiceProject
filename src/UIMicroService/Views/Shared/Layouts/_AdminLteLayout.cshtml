<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Scope ERP Software</title>
    <!--localforage cdn link for storing data in webdb-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/localforage/1.10.0/localforage.min.js" defer integrity="sha512-+BMamP0e7wn39JGL8nKAZ3yAQT2dL5oaXWr4ZYlTGkKOaoXM/Yj7c4oy50Ngz5yoUutAG17flueD4F6QpTlPng==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.5 -->
    <link rel="stylesheet" href="~/adminLte/bootstrap/css/bootstrap.min.css" asp-append-version="true">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">    <!-- Ionicons -->
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <!-- Theme style -->
    <link rel="stylesheet" href="~/adminLte/dist/css/AdminLTE.min.css" asp-append-version="true">
    <!-- AdminLTE Skins. Choose a skin from the css/skins
         folder instead of downloading all of them to reduce the load. -->
    <link rel="stylesheet" href="~/adminLte/dist/css/skins/_all-skins.min.css" asp-append-version="true">
    <!-- iCheck -->
    <link rel="stylesheet" href="~/adminLte/plugins/iCheck/flat/blue.min.css" asp-append-version="true">
    <!-- Morris chart -->
    <link rel="stylesheet" href="~/adminLte/plugins/morris/morris.min.css" asp-append-version="true">
    <!-- jvectormap -->
    @* <link rel="stylesheet" href="~/adminLte/plugins/jvectormap/jquery-jvectormap-1.2.2.min.css" asp-append-version="true"> *@
    <!-- Date Picker -->
    <link rel="stylesheet" href="~/adminlte/plugins/datepicker/datepicker3.min.css" asp-append-version="true">
    <!-- Daterange picker -->
    <link rel="stylesheet" href="~/adminlte/plugins/daterangepicker/daterangepicker-bs3.min.css" asp-append-version="true">
    <!-- bootstrap wysihtml5 - text editor -->
    <link rel="stylesheet" href="~/adminlte/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css" asp-append-version="true">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css" integrity="sha384-b6lVK+yci+bfDmaY1u0zE8YYJt0TZxLEAFyYSLHId4xoVvsrQu3INevFKo+Xir8e" crossorigin="anonymous">
    @*<link href="~/adminlte/bootstrap/css/bootstrap.min.css" rel="stylesheet" />*@
    <link href="~/adminlte/plugins/datatables/datatables.bootstrap.min.css" asp-append-version="true" rel="stylesheet" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" integrity="sha512-aD9ophpFQ61nFZP6hXYu4Q/b/USW7rpLCQLX6Bi0WJHXNO7Js/fUENpBQf/+P4NtpzNX0jSgR5zVvPOJp+W2Kg==" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.datatables.net/v/dt/dt-1.13.4/datatables.min.css" integrity="sha512-A29Sz9/JIcgNtdb1EL3vJh+ApO9evkOOJ1GUQpneK8zCR4D3EHdVcDa8avJhMtpi2fHctnrxsslTylz392YWzA==" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.css" integrity="sha512-3pIirOrwegjM6erE5gPSwkUzO+3cTjpnV9lexlNZqvupR64iZBnOOTiiLPb9M36zpMScbmUNIcHUqKD47M719g==" crossorigin="anonymous">

    <link href="~/styles/notifications.css" rel="stylesheet" asp-append-version="true" />
    <script src="https://code.jquery.com/jquery-3.7.0.min.js" defer integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
    <script src="https://cdn.datatables.net/v/dt/dt-1.13.4/datatables.min.js" defer integrity="sha512-X6UwHx0Ur3ivkMqcmO+KcSnkmGQ2gnG5IivrEHMeY4pNc1GjFgGEAWxlJZGa1l37YwCtIq5LXxZgkw7NB3x6+w==" crossorigin="anonymous" defer></script>
    <!-- Custom CSS -->
    @{
        if (Environment.GetEnvironmentVariable(SoftwareEnvironment.ASPNETCORE_ENVIRONMENT) == SoftwareEnvironment.Development)
        {
            <link href="~/css/site.css" asp-append-version="true" rel="stylesheet" />
        }
        else
        {
            <link href="~/css/site.min.css" asp-append-version="true" rel="stylesheet" />
        }
    }

</head>
<body class="skin-blue sidebar-mini sidebar-collapse fixed">
   
    <div class="wrapper">

        <header class="main-header">
            <partial name="Layouts/Partials/_AdminLteHeader" />
        </header>
        <!-- Left side column. contains the logo and sidebar -->
        <aside class="main-sidebar">
            <partial name="Layouts/Partials/_AdminLteSidebar" />
            <!-- /.sidebar -->
        </aside>

        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper" id="partial">
            @RenderBody()
        </div>
    </div><!-- /.content-wrapper -->
    <footer class="main-footer layout-footer-fixed">
        <partial name="Layouts/Partials/_AdminLteFooter" />
    </footer>

    <!-- Control Sidebar -->
    <aside class="control-sidebar control-sidebar-dark">
        <partial name="Layouts/Partials/_AdminLteAsidebar" />
    </aside><!-- /.control-sidebar -->
    <!-- Add the sidebar's background. This div must be placed
    immediately after the control sidebar -->
    <div class="control-sidebar-bg"></div>
    <!-- ./wrapper -->
    @*Common loader image*@
    <div id="LoadSpinner" style="display:none;"></div>


    <!-- jQuery UI 1.11.4 -->
    <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js" defer asp-append-version="true"></script>
    <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
    @* <script>
    $.widget.bridge('uibutton', $.ui.button);
    </script> *@
    <!-- Bootstrap 3.3.5 -->
    <script src="~/adminlte/bootstrap/js/bootstrap.min.js" defer asp-append-version="true"></script>
    <!-- Morris.js charts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js" defer></script>
    @*<script src="~/adminlte/plugins/morris/morris.min.js" defer ></script>*@
    <!-- Sparkline -->
    <script src="~/adminlte/plugins/sparkline/jquery.sparkline.min.js" defer asp-append-version="true"></script>
    <!-- jvectormap -->
    @*     <script src="~/adminlte/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js" defer  asp-append-version="true"></script>
    <script src="~/adminlte/plugins/jvectormap/jquery-jvectormap-world-mill-en.js" defer  asp-append-version="true"></script>
    *@    <!-- jQuery Knob Chart -->
    <script src="~/adminlte/plugins/knob/jquery.knob.js" defer asp-append-version="true"></script>
    <!-- daterangepicker -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.2/moment.min.js" defer asp-append-version="true"></script>
    <script src="~/adminlte/plugins/daterangepicker/daterangepicker.min.js" defer asp-append-version="true"></script>
    <!-- datepicker -->
    <script src="~/adminlte/plugins/datepicker/bootstrap-datepicker.min.js" defer asp-append-version="true"></script>
    <!-- Bootstrap WYSIHTML5 -->
    <script src="~/adminlte/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js" defer asp-append-version="true"></script>
    <!-- Slimscroll -->
    <script src="~/adminlte/plugins/slimScroll/jquery.slimscroll.min.js" defer asp-append-version="true"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js" defer integrity="sha512-VEd+nq25CkR676O+pLBnDW09R7VQX9Mdiij052gVCp5yVH3jGtH70Ho/UUv4mJDsEdTvqRCFZg0NKGiojGnUCw==" crossorigin="anonymous"></script>
    <!-- FastClick -->
    <script src="~/adminlte/plugins/fastclick/fastclick.min.js" defer asp-append-version="true"></script>
    <!-- AdminLTE App -->
    <script src="~/adminlte/dist/js/app.min.js" defer></script>
    <!-- AdminLTE dashboard demo ( is only for demo purposes) -->
    <script src="~/adminlte/dist/js/pages/dashboard.min.js" defer asp-append-version="true"></script>
    <!-- AdminLTE for demo purposes -->
    <script src="~/adminlte/dist/js/demo.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js" defer integrity="sha512-4MvcHwcbqXKUHB6Lx3Zb5CEAVoE9u84qN+ZSMM6s7z8IeJriExrV3ND5zRze9mxNlABJ6k864P/Vl8m0Sd3DtQ==" crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js" defer integrity="sha512-1u7g/AIgWjQiwWrRIMrY2HFWPY/NS96SRlTqxaNwJnJjKPmkckDPie1snpO6X4nIM+hOZe7n2ytNfRtCQN6u8g==" crossorigin="anonymous"></script>
    @* <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js" defer integrity="sha512-AA1Bzp5Q0K1KanKKmvN/4d3IRKVlv9PYgwFPvm32nPO6QS8yH1HO7LbgB1pgiOxPtfeg5zEn2ba64MUcqJx6CA==" crossorigin="anonymous"></script> *@

    @* load min file as per environment setup *@
    @if (Environment.GetEnvironmentVariable(SoftwareEnvironment.ASPNETCORE_ENVIRONMENT) == SoftwareEnvironment.Development)
    {
        @* <script src="~/typescript/BrowserStorage/storageFunctions.js" defer  asp-append-version="true"></script> *@
    }
    else
    {

    }
    @*     @{
    if (Environment.GetEnvironmentVariable("ASPNETCORE_ENVIRONMENT") == "Development")
    {
    <script src="~/js/scope/commonfunctions.js" defer  asp-append-version="true"></script>
    <script src="~/js/scope/sidebarsearch.js" defer  asp-append-version="true"></script>
    <script src="~/js/scope/storageFunctions.js" defer  asp-append-version="true"></script>
    }
    else
    {
    <script src="~/js/scope/commonfunctions.min.js" defer  asp-append-version="true"></script>
    <script src="~/js/scope/sidebarsearch.min.js" defer  asp-append-version="true"></script>
    <script src="~/js/scope/storageFunctions.min.js" defer  asp-append-version="true"></script>
    }
    }
    *@

    @* <script type="text/javascript">

    //adding context object for future reference to identify user.


    let AppToken =  function ProcessToken() {
    return jsTokenObject;
    }
    //Get jsTokenObjectect for passing jwt info for ajax api call
    let scopeTokenData = AppToken();

    //default cacheKEY is defined empty


    $(document).ready(async function () { // Does not work with ASYNC
    // await clearCache();
    await callback();
    });


    </script> *@
    @* setting user token information for browser cache *@
    <input hidden id="TokenConfig" ScopeId="@HttpContextAccessor?.HttpContext.GetScopeId()" SessionId="@HttpContextAccessor?.HttpContext.GetSessionId()" SchoolName="@UserIdentity.GetUserName(HttpContextAccessor?.HttpContext)" Token="@HttpContextAccessor?.HttpContext.GetToken()" UserId="@UserIdentity.GetUserId(HttpContextAccessor?.HttpContext)" ClientId="@UserIdentity.GetClientId(HttpContextAccessor?.HttpContext)" SetupEnvironment="@HttpContextAccessor?.HttpContext.GetSetupEnvironment()" />

    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js" defer></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js" defer></script>
    
    @* <script type="text/javascript">
    let jsTokenObject = {
    SchoolName: '@UserIdentity.User(HttpContextAccessor?.HttpContext)?.Username',
    Token: '@UserIdentity.GetToken(HttpContextAccessor?.HttpContext)',
    Id: '@UserIdentity.GetIdForUserDb(HttpContextAccessor?.HttpContext)'
    };
    </script> *@
    @* <script type="module" src="~/dist/schoollibrary.js" defer asp-append-version="true"> </script> *@
    <script type="module" src="~/dist/scripts/main.min.js" defer asp-append-version="true"></script>
    @* <script src="~/app.js" defer asp-append-version="true"></script> *@
    @* <script src="~/dist/bundle.js" type="module" defer asp-append-version="true"></script>  *@

    @*  <script type="module">
    import * as test from "./typescript/app.js";

    test.InitApp.SaveToken(jsTokenObject);

    </script> *@
    @*all scripts come here from child view*@

    @await RenderSectionAsync("Scripts", false)
</body>
</html>
